version: 0.2
            
env:
  variables:
    TEMPLATE: template.yaml
    PACKAGED_TEMPLATE: packaged.yaml
    APP_NAME: ssosync
phases:
  install: 
    commands:
      # Print all environment variables (handy for AWS CodeBuild logs)
      - env

      # Update sam to latest version
      - wget https://github.com/aws/aws-sam-cli/releases/latest/download/aws-sam-cli-linux-x86_64.zip
      - unzip aws-sam-cli-linux-x86_64.zip -d sam-installation
      - sudo ./sam-installation/install --update
      - rm -rf ./sam-installation  aws-sam-cli-linux-x86_64.zip

  build:
    commands:
      # Package our application with AWS SAM
      - sam package --s3-bucket ${S3BUCKET} 

  post_build:
    commands:
      - ls -la 

artifacts:
  files:
    - packaged.yaml
